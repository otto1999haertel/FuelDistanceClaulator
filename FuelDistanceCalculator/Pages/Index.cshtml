@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<div class="text-center">
    <h1 class="display-4">Welcome to the Fuel Distance Calculator</h1>
    <p>Calculate the cost and compare fuel prices at two different stations.</p>
</div>

<div class="container">
    <form method="post">
        <div class="row justify-content-center">
            <!-- Eingabefelder für globale Werte - mittig zentriert -->
            <div class="col-md-6">
                <h3>Globale Eingabewerte</h3>
                <div class="form-group">
                    <label for="fuelAmount">Zu tankende Menge (Liter)</label>
                    <input type="number" step="0.01" id="FuelAmount" name="FuelAmount" class="form-control" required asp-for="FuelAmount" value="@Model.FuelAmount" />
                </div>
                <div class="form-group">
                    <label for="pricePerKm">Preis pro Kilometer</label>
                    <input type="number" step="0.01" id="PricePerKm" name="pricePerKm" class="form-control" required asp-for="PricePerKm" value="@Model.PricePerKm"/>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- Tankstelle 1 Eingabefelder - links ausgerichtet -->
            <div class="col-md-5 offset-md-1">
                <h3>Tankstelle 1</h3>
                <div class="form-group">
                    <label for="fuelPrice1">Preis an der Tankstelle 1 (€/Liter)</label>
                    <input type="number" step="0.01" id="FuelPrice1" name="FuelPrice1" class="form-control" required asp-for="FuelPrice1" value="@Model.FuelPrice1"/>
                </div>
                <div class="form-group">
                    <label for="distance1">Entfernung der Tankstelle 1 (km)</label>
                    <input type="number" step="0.1" id="Distance1" name="Distance1" class="form-control" required asp-for="Distance1" value="@Model.Distance1" />
                </div>
            </div>

            <!-- Tankstelle 2 Eingabefelder - rechts ausgerichtet -->
            <div class="col-md-5">
                <h3>Tankstelle 2</h3>
                <div class="form-group">
                    <label for="fuelPrice2">Preis an der Tankstelle 2 (€/Liter)</label>
                    <input type="number" step="0.01" id="FuelPrice2" name="FuelPrice2" class="form-control" required asp-for="FuelPrice2" value="@Model.FuelPrice2" />
                </div>
                <div class="form-group">
                    <label for="distance2">Entfernung der Tankstelle 2 (km)</label>
                    <input type="number" step="0.1" id="Distance2" name="Distance2" class="form-control" required asp-for="Distance2" value="@Model.Distance2" />
                </div>
            </div>
        </div>
        <div class="row justify-content-center mt-3">
        <div class="d-flex justify-content-center">
        <!-- Berechnen-Button -->
        <button type="submit" class="btn btn-primary mx-2" style="width: 120px" name="action" value="@ActionConstants.Calculate">
            Berechnen
        </button>

        <!-- Speichern-Button -->
        <button type="submit" class="btn btn-primary mx-2" style="width: 120px" 
                @(Model.CalculationSucessful ? "" : "disabled") name="action" value="@ActionConstants.Save">
            Speichern
        </button>
    </div>

    </form>
</div>

</div>


    <!-- Berechnungen oder Ergebnisse - unter dem Berechnen Button -->
    @if (Model.CalculationSucessful)
    {
        <div class="mt-4 text-center">
            <h4>Ergebnisse:</h4>
            <p>Tankstelle 1: Gesamtkosten: €@Model.TotalCost1</p>
            <p>Tankstelle 2: Gesamtkosten: €@Model.TotalCost2</p>
        </div>
    }
</div>

<div id="errorToast" style="
    display: none;
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: red;
    color: white;
    padding: 10px 20px;
    border-radius: 5px;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);">
    <span id="errorMessage"></span>
</div>

@if (TempData["Message"] != null)
{
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            var toast = document.getElementById("errorToast");
            var message = "@TempData["Message"]";
            document.getElementById("errorMessage").innerText = message;
            toast.style.display = "block";

            // Toast nach 5 Sekunden ausblenden
            setTimeout(function() {
                toast.style.display = "none";
            }, 5000);
        });
    </script>
}